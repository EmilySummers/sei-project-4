(this.webpackJsonpfrontend=this.webpackJsonpfrontend||[]).push([[0],{114:function(e,t){},129:function(e,t,a){"use strict";a.r(t);var r=a(0),n=a.n(r),s=a(43),c=a.n(s),o=(a(75),a(76),a(16)),i=a(26),l=a(19),u=a.n(l),p=function(){return n.a.createElement("section",{className:"hero"},n.a.createElement("div",{className:"hero-body"}))},m=a(5),h=a(6),d=a(9),f=a(7),v=a(10),g=function(){function e(){Object(m.a)(this,e)}return Object(h.a)(e,null,[{key:"setToken",value:function(e){localStorage.setItem("token",e)}},{key:"getToken",value:function(){return localStorage.getItem("token")}},{key:"logout",value:function(){localStorage.removeItem("token")}},{key:"getPayload",value:function(){var e=this.getToken();if(!e)return!1;var t=e.split(".");return!(t.length<3)&&JSON.parse(atob(t[1]))}},{key:"isAuthenticated",value:function(){var e=this.getPayload();return!!e&&Math.round(Date.now()/1e3)<e.exp}},{key:"getUser",value:function(){return this.getPayload().sub}}]),e}(),b=function(e){function t(){var e,a;Object(m.a)(this,t);for(var r=arguments.length,n=new Array(r),s=0;s<r;s++)n[s]=arguments[s];return(a=Object(d.a)(this,(e=Object(f.a)(t)).call.apply(e,[this].concat(n)))).state={navOpen:!1},a.toggleNavbar=function(){a.setState({navOpen:!a.state.navOpen})},a.handleLogout=function(){g.logout(),a.props.history.push("/")},a}return Object(v.a)(t,e),Object(h.a)(t,[{key:"componentDidUpdate",value:function(e){this.props.location.pathname!==e.location.pathname&&this.setState({navOpen:!1})}},{key:"render",value:function(){return n.a.createElement("nav",{className:"navbar is-transparent"},n.a.createElement("div",{className:"container"},n.a.createElement("div",{className:"navbar-brand"},n.a.createElement(o.b,{className:"navbar-item has-text-white",to:"/"},n.a.createElement("h1",null,"Roam")),n.a.createElement("p",{className:"navbar-burger has-text-white ".concat(this.state.navOpen?"is-active":""),onClick:this.toggleNavbar},n.a.createElement("span",{"aria-hidden":"true"}),n.a.createElement("span",{"aria-hidden":"true"}),n.a.createElement("span",{"aria-hidden":"true"}))),n.a.createElement("div",{className:"navbar-menu ".concat(this.state.navOpen?"is-active":"")},n.a.createElement("div",{className:"navbar-end"},g.isAuthenticated()&&n.a.createElement(o.b,{className:"navbar-item has-text-white",to:"/mytrips"},"MY TRIPS"),!g.isAuthenticated()&&n.a.createElement(o.b,{className:"navbar-item has-text-white",to:"/register"},"REGISTER"),!g.isAuthenticated()&&n.a.createElement(o.b,{className:"navbar-item has-text-white",to:"/login"},"LOGIN"),g.isAuthenticated()&&n.a.createElement(o.b,{className:"navbar-item has-text-white",to:"/trips"},"EXPLORE"),g.isAuthenticated()&&n.a.createElement(o.b,{className:"navbar-item has-text-white",to:"/notifications"},"NOTIFICATIONS"),g.isAuthenticated()&&n.a.createElement(o.b,{className:"navbar-item has-text-white",to:"/profile"},"MY PROFILE"),g.isAuthenticated()&&n.a.createElement("a",{href:"/",className:"navbar-item has-text-white",onClick:this.handleLogout},"LOGOUT")))))}}]),t}(n.a.Component),E=Object(i.f)(b),k=a(4),N=a.n(k),w=a(11),y=a(1),O=a(14),j=a(12),D=a.n(j),x=function(e){function t(){var e,a;Object(m.a)(this,t);for(var r=arguments.length,n=new Array(r),s=0;s<r;s++)n[s]=arguments[s];return(a=Object(d.a)(this,(e=Object(f.a)(t)).call.apply(e,[this].concat(n)))).state={image:null},a.handleUpload=function(){var e=Object(w.a)(N.a.mark((function e(t){var r,n,s,c;return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.target.files,n=new FormData,s=a.props.preset,n.append("file",r[0]),n.append("upload_preset","".concat(s)),e.next=7,D.a.post("https://api.cloudinary.com/v1_1/dqrkw1z1a/image/upload",n);case 7:c=e.sent,a.setState({image:c.data.url},(function(){a.props.handleChange({target:{name:a.props.fieldName,value:c.data.url}})}));case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),a}return Object(v.a)(t,e),Object(h.a)(t,[{key:"render",value:function(){var e=this.props.displayImgUp,t=this.state.image;return n.a.createElement(n.a.Fragment,null,t&&e?n.a.createElement("div",{className:"image-upload"},n.a.createElement("img",{src:t,alt:"profile"}),n.a.createElement("button",{className:"pin-button"},"\u2714\ufe0e")):n.a.createElement(n.a.Fragment,null,n.a.createElement("input",{className:this.props.inputClassName,type:"file",onChange:this.handleUpload})))}}]),t}(n.a.Component),_=function(e){function t(){var e,a;Object(m.a)(this,t);for(var r=arguments.length,n=new Array(r),s=0;s<r;s++)n[s]=arguments[s];return(a=Object(d.a)(this,(e=Object(f.a)(t)).call.apply(e,[this].concat(n)))).state={data:{username:"",email:"",image:"",password:"",password_confirmation:""},errors:{}},a.handleChange=function(e){var t=Object(O.a)({},a.state.data,Object(y.a)({},e.target.name,e.target.value)),r=Object(O.a)({},a.state.errors,Object(y.a)({},e.target.name,""));a.setState({data:t,errors:r})},a.handleSubmit=function(){var e=Object(w.a)(N.a.mark((function e(t){var r;return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.prev=1,e.next=4,D.a.post("/api/register",a.state.data);case 4:r=e.sent,l.notify.show(r.data.message,"success",3e3),a.props.history.push("/login"),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(1),a.setState({errors:e.t0.response.data});case 12:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(t){return e.apply(this,arguments)}}(),a}return Object(v.a)(t,e),Object(h.a)(t,[{key:"render",value:function(){return n.a.createElement("section",{className:"register-page"},n.a.createElement("div",{className:"register-hero"},n.a.createElement("div",{className:"register-wrapper"},n.a.createElement("div",{className:"register-container columns"},n.a.createElement("div",{className:"column is-half-desktop"},n.a.createElement("img",{src:"https://res.cloudinary.com/dqrkw1z1a/image/upload/v1583248319/ROAM/5c88d769f73f5c0a3b1d1804_copy_twtdid.jpg",alt:"city-break"})),n.a.createElement("div",{className:"column is-half-desktop"},n.a.createElement("form",{className:"register-form",onSubmit:this.handleSubmit},n.a.createElement("h1",{className:"reg-title"},"Register"),n.a.createElement("div",{className:"field"},n.a.createElement("div",{className:"control"},n.a.createElement("input",{className:this.state.errors.username?"input is-danger":"input",onChange:this.handleChange,placeholder:"Username",name:"username"})),this.state.errors.username&&n.a.createElement("small",{className:"help is-danger"},this.state.errors.username)),n.a.createElement("div",{className:"field"},n.a.createElement("div",{className:"control"},n.a.createElement("input",{className:this.state.errors.email?"input is-danger":"input",onChange:this.handleChange,placeholder:"Email",name:"email"}))),this.state.errors.email&&n.a.createElement("small",{className:"help is-danger"},this.state.errors.email),n.a.createElement("div",{className:"field"},n.a.createElement("div",{className:"control"},n.a.createElement("input",{className:this.state.errors.password?"input is-danger":"input",onChange:this.handleChange,placeholder:"Password",type:"password",name:"password"})),this.state.errors.password&&n.a.createElement("small",{className:"help is-danger"},this.state.errors.password)),n.a.createElement("div",{className:"field"},n.a.createElement("div",{className:"control"},n.a.createElement("input",{className:this.state.errors.password_confirmation?"input is-danger":"input",onChange:this.handleChange,placeholder:"Confirm Password",type:"password",name:"password_confirmation"})),this.state.errors.password_confirmation&&n.a.createElement("small",{className:"help is-danger"},this.state.errors.password_confirmation)),n.a.createElement("div",{className:"image-container"},n.a.createElement(x,{handleChange:this.handleChange,fieldName:"image",displayImgUp:!0,inputClassName:"register-image",preset:"afar9d6z"})),n.a.createElement("button",{className:"button is-fullwidth"},"Start Roaming")))))))}}]),t}(n.a.Component),S=function(e){function t(){var e,a;Object(m.a)(this,t);for(var r=arguments.length,n=new Array(r),s=0;s<r;s++)n[s]=arguments[s];return(a=Object(d.a)(this,(e=Object(f.a)(t)).call.apply(e,[this].concat(n)))).state={data:{email:"",password:""},error:""},a.handleChange=function(e){e.target.className="input";var t=Object(O.a)({},a.state.data,Object(y.a)({},e.target.name,e.target.value)),r=Object(O.a)({},a.state.errors,Object(y.a)({},e.target.name,""));a.setState({data:t,errors:r})},a.handleSubmit=function(){var e=Object(w.a)(N.a.mark((function e(t){var r;return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.prev=1,e.next=4,D.a.post("/api/login",a.state.data);case 4:r=e.sent,g.setToken(r.data.token),l.notify.show(r.data.message,"success",3e3),a.props.history.push("/"),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(1),a.setState({error:"Invalid Credentials"});case 13:case"end":return e.stop()}}),e,null,[[1,10]])})));return function(t){return e.apply(this,arguments)}}(),a}return Object(v.a)(t,e),Object(h.a)(t,[{key:"render",value:function(){return n.a.createElement("section",{className:"login-hero"},n.a.createElement("form",{className:"login-form",onSubmit:this.handleSubmit},n.a.createElement("h2",{className:"title has-text-white has-text-centered is-2"},"Login"),n.a.createElement("div",{className:"field"},n.a.createElement("div",{className:"control"},n.a.createElement("input",{className:this.state.error?"input is-danger":"input",onChange:this.handleChange,placeholder:"Email",name:"email"}))),n.a.createElement("div",{className:"field"},n.a.createElement("div",{className:"control"},n.a.createElement("input",{className:this.state.error?"input is-danger":"input",onChange:this.handleChange,placeholder:"Password",name:"password",type:"password"})),this.state.error&&n.a.createElement("small",{className:"help is-danger"},this.state.error)),n.a.createElement("button",{className:"button"},"Login")))}}]),t}(n.a.Component),C=function(e){function t(){var e,a;Object(m.a)(this,t);for(var r=arguments.length,n=new Array(r),s=0;s<r;s++)n[s]=arguments[s];return(a=Object(d.a)(this,(e=Object(f.a)(t)).call.apply(e,[this].concat(n)))).state={data:{id:null,username:"",email:"",image:"",trips:[]},errors:{}},a.handleChange=function(e){var t=Object(O.a)({},a.state.data,Object(y.a)({},e.target.name,e.target.value)),r=Object(O.a)({},a.state.errors,Object(y.a)({},e.target.name,""));a.setState({data:t,errors:r})},a.handleSubmit=function(){var e=Object(w.a)(N.a.mark((function e(t){var r;return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),r=a.state.data.id,e.prev=2,e.next=5,D.a.put("/api/".concat(r,"/"),a.state.data,{headers:{Authorization:"Bearer ".concat(g.getToken())}});case 5:a.props.history.push("/profile"),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(2),a.setState({errors:e.t0.response.data});case 11:case"end":return e.stop()}}),e,null,[[2,8]])})));return function(t){return e.apply(this,arguments)}}(),a}return Object(v.a)(t,e),Object(h.a)(t,[{key:"componentDidMount",value:function(){var e=Object(w.a)(N.a.mark((function e(){var t,a;return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,D.a.get("/api/profile",{headers:{Authorization:"Bearer ".concat(g.getToken())}});case 3:t=e.sent,a=t.data,this.setState({data:a}),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.log(e.t0);case 11:case"end":return e.stop()}}),e,this,[[0,8]])})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){return n.a.createElement("div",{className:"hero profile-hero"},n.a.createElement("div",{className:"profile-wrapper"},n.a.createElement("form",{onSubmit:this.handleSubmit},n.a.createElement("div",{className:"profile-container"},n.a.createElement("div",{className:"image-container"},n.a.createElement(x,{handleChange:this.handleChange,fieldName:"image",displayImgUp:!0,preset:"afar9d6z",inputClassName:"profile-image"})),n.a.createElement("div",{className:"field-name"},n.a.createElement("div",{className:"control"},n.a.createElement("input",{className:this.state.errors.username?"input is-danger":"input",onChange:this.handleChange,placeholder:"Username",name:"username",value:this.state.data.username||""})),this.state.errors.username&&n.a.createElement("small",{className:"help is-danger"},this.state.errors.username)),n.a.createElement("div",{className:"field-email"},n.a.createElement("div",{className:"control"},n.a.createElement("input",{className:this.state.errors.email?"input is-danger":"input",onChange:this.handleChange,placeholder:"Email",name:"email",value:this.state.data.email||""}))),this.state.errors.email&&n.a.createElement("small",{className:"help is-danger"},this.state.errors.email)),n.a.createElement("div",{className:"profile-buttons"},n.a.createElement("button",{className:"button edit"},"Save changes")))))}}]),t}(n.a.Component),A=function(e){function t(){var e,a;Object(m.a)(this,t);for(var r=arguments.length,n=new Array(r),s=0;s<r;s++)n[s]=arguments[s];return(a=Object(d.a)(this,(e=Object(f.a)(t)).call.apply(e,[this].concat(n)))).state={user:{}},a.handleDelete=function(){var e=Object(w.a)(N.a.mark((function e(t){return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,D.a.delete("/api/".concat(t),{headers:{Authorization:"Bearer ".concat(g.getToken())}});case 3:g.logout(),a.props.history.push("/"),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.log(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}(),a}return Object(v.a)(t,e),Object(h.a)(t,[{key:"getData",value:function(){var e=Object(w.a)(N.a.mark((function e(){var t;return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,D.a.get("/api/profile",{headers:{Authorization:"Bearer ".concat(g.getToken())}});case 3:t=e.sent,this.setState({user:t.data}),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.log(e.t0);case 10:case"end":return e.stop()}}),e,this,[[0,7]])})));return function(){return e.apply(this,arguments)}}()},{key:"componentDidMount",value:function(){this.getData()}},{key:"render",value:function(){var e=this,t=this.state.user,a=t.username,r=t.email,s=t.image,c=t.id;return n.a.createElement("div",{className:"hero profile-hero"},n.a.createElement("div",{className:"profile-wrapper"},n.a.createElement("div",{className:"profile-container"},n.a.createElement("img",{className:"profile-image",src:s,alt:"profile"}),n.a.createElement("h2",null,a),n.a.createElement("p",null,r)),n.a.createElement("div",{className:"profile-buttons"},n.a.createElement(o.b,{to:"/profile/edit",className:"button edit"},"Edit Profile"),n.a.createElement("button",{className:"button delete-account",onClick:function(){return e.handleDelete(c)}},"Delete account"))))}}]),t}(n.a.Component),T=a(17),z=function(e){function t(){var e,a;Object(m.a)(this,t);for(var r=arguments.length,n=new Array(r),s=0;s<r;s++)n[s]=arguments[s];return(a=Object(d.a)(this,(e=Object(f.a)(t)).call.apply(e,[this].concat(n)))).state={tripData:{trips:[],trip_shares:[],trip_offers:[]},requestData:{trips:[],trip_requests:[]},offerData:{trip_offers:[]},errors:{}},a.getTripData=Object(w.a)(N.a.mark((function e(){var t,r,n,s;return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=g.getUser(),e.prev=1,e.next=4,D.a.get("/api/".concat(t),{headers:{Authorization:"Bearer ".concat(g.getToken())}});case 4:r=e.sent,n=r.data,s=n.trips.map((function(e){return e.id})),a.setState({tripData:{trips:Object(T.a)(s),trip_shares:n.trip_shares,trip_offers:n.trip_offers},offerData:{trip_offers:n.trip_offers}}),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(1),console.log(e.t0);case 13:case"end":return e.stop()}}),e,null,[[1,10]])}))),a.joinTrip=function(e){var t=a.state.tripData.trip_shares.filter((function(t){return t.id!==e})).map((function(e){return e.id}));a.setState({tripData:{trips:[].concat(Object(T.a)(a.state.tripData.trips),[e]),trip_shares:t}},(function(){a.assignTrip()}))},a.getRequestData=function(){var e=Object(w.a)(N.a.mark((function e(t){var r,n,s,c,o,i;return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=localStorage.getItem("requestee"),e.prev=1,e.next=4,D.a.get("/api/".concat(r),{headers:{Authorization:"Bearer ".concat(g.getToken())}});case 4:n=e.sent,s=n.data,c=s.trips.map((function(e){return e.id})),o=s.trip_requests.map((function(e){return e.id})),i=o.filter((function(e){return e!==t})),a.setState({requestData:{trips:[].concat(Object(T.a)(c),[t]),trip_requests:Object(T.a)(i)}},(function(){a.acceptOffer(t)})),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(1),console.log(e.t0);case 15:case"end":return e.stop()}}),e,null,[[1,12]])})));return function(t){return e.apply(this,arguments)}}(),a.acceptOffer=function(){var e=Object(w.a)(N.a.mark((function e(t){var r;return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=localStorage.getItem("requestee"),e.prev=1,e.next=4,D.a.put("/api/".concat(r,"/"),a.state.requestData,{headers:{Authorization:"Bearer ".concat(g.getToken())}});case 4:a.deleteOffer(t),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(1),a.setState({errors:e.t0.response.data});case 10:case"end":return e.stop()}}),e,null,[[1,7]])})));return function(t){return e.apply(this,arguments)}}(),a.deleteOffer=function(e){var t=a.state.offerData.trip_offers.map((function(e){return e.id})).filter((function(t){return t!==e}));a.setState({offerData:{trip_offers:t}},(function(){a.completeDelete()}))},a.completeDelete=Object(w.a)(N.a.mark((function e(){var t;return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=g.getUser(),e.prev=1,e.next=4,D.a.put("/api/".concat(t,"/"),a.state.offerData,{headers:{Authorization:"Bearer ".concat(g.getToken())}});case 4:l.notify.show("Request accepted!","success",3e3),a.getTripData(),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),console.log(e.t0);case 11:case"end":return e.stop()}}),e,null,[[1,8]])}))),a.assignTrip=Object(w.a)(N.a.mark((function e(){var t;return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=g.getUser(),e.prev=1,e.next=4,D.a.put("/api/".concat(t,"/"),a.state.tripData,{headers:{Authorization:"Bearer ".concat(g.getToken())}});case 4:l.notify.show("You have been added to the trip!","success",3e3),a.props.history.push("/mytrips"),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),a.setState({errors:e.t0.response.data});case 11:case"end":return e.stop()}}),e,null,[[1,8]])}))),a}return Object(v.a)(t,e),Object(h.a)(t,[{key:"formatDate",value:function(e){var t=e.getDate(),a=e.getMonth(),r=e.getFullYear();return t+" "+["January","February","March","April","May","June","July","August","September","October","November","December"][a]+" "+r}},{key:"componentDidMount",value:function(){this.getTripData()}},{key:"render",value:function(){var e=this;return n.a.createElement("div",{className:"hero profile-hero"},n.a.createElement("div",{className:"note-wrapper"},n.a.createElement("div",{className:"note-container"},n.a.createElement("h2",null,"Notifications"),this.state.tripData.trip_shares.length<1&&this.state.tripData.trip_offers.length<1?n.a.createElement("h3",null,"You have no notifications"):n.a.createElement("div",{className:"wrapper"},this.state.tripData.trip_shares.length>0&&this.state.tripData.trip_shares.map((function(t,a){return n.a.createElement("div",{className:"note-wrap",key:a},n.a.createElement("p",null,"You have been invited to join a trip to ",t.destination," on ",e.formatDate(new Date(t.start_date))),n.a.createElement("button",{onClick:function(){return e.joinTrip(t.id)}},"Join"))})),this.state.tripData.trip_offers.length>0&&this.state.tripData.trip_offers.map((function(t,a){return n.a.createElement("div",{className:"note-wrap",key:a},n.a.createElement("p",null,"... has requested to join your trip to ",t.destination," on ",e.formatDate(new Date(t.start_date))),n.a.createElement("button",{onClick:function(){return e.getRequestData(t.id)}},"Accept"))}))))))}}]),t}(n.a.Component),U=a(37),q=a(32),M=(a(128),a(67)),I="pk.eyJ1IjoiZW1pbHlzdW1tZXJzIiwiYSI6ImNrODA1b202bDBjbWgzc211MW84dWhibWIifQ._LFo3EZGTO96sSrCPbt3Vg",B=function(e){function t(){var e,a;Object(m.a)(this,t);for(var r=arguments.length,s=new Array(r),c=0;c<r;c++)s[c]=arguments[c];return(a=Object(d.a)(this,(e=Object(f.a)(t)).call.apply(e,[this].concat(s)))).state={viewport:{longitude:0,latitude:0,zoom:0}},a.myMap=n.a.createRef(),a}return Object(v.a)(t,e),Object(h.a)(t,[{key:"componentDidMount",value:function(){var e=Object(w.a)(N.a.mark((function e(){var t,a;return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.props.destination,e.prev=1,e.next=4,D.a.get("https://api.mapbox.com/geocoding/v5/mapbox.places/".concat(t,".json?access_token=").concat(I));case 4:a=e.sent,this.setState({viewport:{longitude:a.data.features[0].center[0],latitude:a.data.features[0].center[1],zoom:10}}),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),console.log(e.t0);case 11:case"end":return e.stop()}}),e,this,[[1,8]])})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this;return n.a.createElement(n.a.Fragment,null,n.a.createElement(q.c,Object.assign({ref:this.myMap},this.state.viewport,{height:"30vh",width:"20vw",mapStyle:"mapbox://styles/mapbox/streets-v9",onViewportChange:function(t){return e.setState({viewport:t})},mapboxApiAccessToken:I}),n.a.createElement(q.b,null)),n.a.createElement(M.a,{mapRef:this.myMap,mapboxApiAccessToken:I,onViewportChange:function(t){return e.setState({viewport:t})}}))}}]),t}(n.a.Component),R=function(e){function t(){var e,a;Object(m.a)(this,t);for(var r=arguments.length,n=new Array(r),s=0;s<r;s++)n[s]=arguments[s];return(a=Object(d.a)(this,(e=Object(f.a)(t)).call.apply(e,[this].concat(n)))).state={main:"",description:"",icon:"",temp:0},a.calculateTemp=function(){return Math.round(a.state.temp-273.15)},a}return Object(v.a)(t,e),Object(h.a)(t,[{key:"componentDidMount",value:function(){var e=Object(w.a)(N.a.mark((function e(){var t,a,r;return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.props.destination,e.prev=1,e.next=4,D.a.get("http://api.openweathermap.org/data/2.5/weather?q=".concat(t,"&appid=").concat("7bb82663126ba33c862695982882b9ba"));case 4:a=e.sent,r=a.data,this.setState({main:r.weather[0].main,description:r.weather[0].description,icon:r.weather[0].icon,temp:r.main.temp}),this.calculateTemp(),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(1),console.log(e.t0);case 13:case"end":return e.stop()}}),e,this,[[1,10]])})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this.state,t=e.main,a=e.description,r=e.icon;return n.a.createElement("div",{className:"weather"},n.a.createElement("div",{className:"main"},n.a.createElement("img",{src:"http://openweathermap.org/img/wn/".concat(r,"@2x.png"),alt:"weather"}),n.a.createElement("p",null,this.calculateTemp(),"\u2103")),n.a.createElement("p",null,t," - ",a))}}]),t}(n.a.Component),J=function(e){function t(){var e,a;Object(m.a)(this,t);for(var r=arguments.length,n=new Array(r),s=0;s<r;s++)n[s]=arguments[s];return(a=Object(d.a)(this,(e=Object(f.a)(t)).call.apply(e,[this].concat(n)))).state={trip:{},photos:[],image:{image:""},displayImgUp:!1,attractions:[],link:{link:""},to_dos:[],to_do:{to_do:""},data:{open_trip:!1},errors:{},shareData:{trip_shares:[]},shareUser:{},message:"Share successful!",dateEdit:!0,editData:{}},a.handleChange=function(e){var t=Object(O.a)({},a.state.data,Object(y.a)({},e.target.name,e.target.value)),r=Object(O.a)({},a.state.errors,Object(y.a)({},e.target.name,""));a.setState({data:t,errors:r})},a.handleToDo=function(e){var t=Object(y.a)({},e.target.name,e.target.value);a.setState({to_do:t})},a.createToDo=function(){var e=Object(w.a)(N.a.mark((function e(t){var r;return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),r=a.props.match.params.id,e.prev=2,e.next=5,D.a.post("/api/trips/".concat(r,"/to_dos/"),a.state.to_do,{headers:{Authorization:"Bearer ".concat(g.getToken())}});case 5:a.setState({to_do:{to_do:""}}),a.getData(),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(2),console.log(e.t0);case 12:case"end":return e.stop()}}),e,null,[[2,9]])})));return function(t){return e.apply(this,arguments)}}(),a.handleDeleteToDo=function(){var e=Object(w.a)(N.a.mark((function e(t){var r;return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=a.props.match.params.id,e.prev=1,e.next=4,D.a.delete("/api/trips/".concat(r,"/to_dos/").concat(t.id),{headers:{Authorization:"Bearer ".concat(g.getToken())}});case 4:a.getData(),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(1),console.log(e.t0);case 10:case"end":return e.stop()}}),e,null,[[1,7]])})));return function(t){return e.apply(this,arguments)}}(),a.handleAttraction=function(e){var t=Object(y.a)({},e.target.name,e.target.value);a.setState({link:t})},a.createAttraction=function(){var e=Object(w.a)(N.a.mark((function e(t){var r;return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),r=a.props.match.params.id,e.prev=2,e.next=5,D.a.post("/api/trips/".concat(r,"/attractions/"),a.state.link,{headers:{Authorization:"Bearer ".concat(g.getToken())}});case 5:a.setState({link:{link:""}}),a.getData(),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(2),console.log(e.t0);case 12:case"end":return e.stop()}}),e,null,[[2,9]])})));return function(t){return e.apply(this,arguments)}}(),a.handleDeleteAttraction=function(){var e=Object(w.a)(N.a.mark((function e(t){var r;return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=a.props.match.params.id,e.prev=1,e.next=4,D.a.delete("/api/trips/".concat(r,"/attractions/").concat(t.id),{headers:{Authorization:"Bearer ".concat(g.getToken())}});case 4:a.getData(),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(1),console.log(e.t0);case 10:case"end":return e.stop()}}),e,null,[[1,7]])})));return function(t){return e.apply(this,arguments)}}(),a.handlePhoto=function(e){var t=Object(y.a)({},e.target.name,e.target.value);a.setState({image:t,displayImgUp:!a.state.displayImgUp})},a.createPhoto=function(){var e=Object(w.a)(N.a.mark((function e(t){var r;return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),r=a.props.match.params.id,e.prev=2,e.next=5,D.a.post("/api/trips/".concat(r,"/photos/"),a.state.image,{headers:{Authorization:"Bearer ".concat(g.getToken())}});case 5:a.setState({image:{image:""},displayImgUp:!a.state.displayImgUp}),a.getData(),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(2),console.log(e.t0);case 12:case"end":return e.stop()}}),e,null,[[2,9]])})));return function(t){return e.apply(this,arguments)}}(),a.handleDeletePhoto=function(){var e=Object(w.a)(N.a.mark((function e(t){var r;return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=a.props.match.params.id,e.prev=1,e.next=4,D.a.delete("/api/trips/".concat(r,"/photos/").concat(t.id),{headers:{Authorization:"Bearer ".concat(g.getToken())}});case 4:a.getData(),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(1),console.log(e.t0);case 10:case"end":return e.stop()}}),e,null,[[1,7]])})));return function(t){return e.apply(this,arguments)}}(),a.toggleStatus=function(e){e.preventDefault(),a.setState({data:{open_trip:!a.state.data.open_trip}},(function(){a.editTrip()}))},a.editTrip=Object(w.a)(N.a.mark((function e(){var t;return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=a.props.match.params.id,e.prev=1,e.next=4,D.a.put("/api/trips/".concat(t,"/"),a.state.data,{headers:{Authorization:"Bearer ".concat(g.getToken())}},(function(){a.getData()}));case 4:e.next=9;break;case 6:e.prev=6,e.t0=e.catch(1),a.setState({errors:e.t0.response.data});case 9:case"end":return e.stop()}}),e,null,[[1,6]])}))),a.handleChangeShare=function(e){var t=Object(O.a)({},a.state.shareUser,Object(y.a)({},e.target.name,e.target.value)),r=Object(O.a)({},a.state.errors,Object(y.a)({},e.target.name,""));a.setState({shareUser:t,errors:r})},a.shareTrip=function(){var e=Object(w.a)(N.a.mark((function e(t){var r,n,s;return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.prev=1,e.next=4,D.a.get("/api/roamers",{headers:{Authorization:"Bearer ".concat(g.getToken())}});case 4:r=e.sent,n=r.data.filter((function(e){return e.email===a.state.shareUser.email})),s=n[0].id,a.getUserShares(s),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(1),console.log(e.t0);case 13:case"end":return e.stop()}}),e,null,[[1,10]])})));return function(t){return e.apply(this,arguments)}}(),a.getUserShares=function(){var e=Object(w.a)(N.a.mark((function e(t){var r,n,s;return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,D.a.get("/api/".concat(t,"/"),{headers:{Authorization:"Bearer ".concat(g.getToken())}});case 3:r=e.sent,n=r.data,s=n.trip_shares.map((function(e){return e.id})),a.setState({shareData:{trip_shares:Object(T.a)(s)}},(function(){a.addTripShare(t)})),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),console.log(e.t0);case 12:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(t){return e.apply(this,arguments)}}(),a.addTripShare=function(){var e=Object(w.a)(N.a.mark((function e(t){var r;return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=parseInt(a.props.match.params.id),a.setState({shareData:{trip_shares:[].concat(Object(T.a)(a.state.shareData.trip_shares),[r])}},(function(){a.completeShare(t)}));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),a.completeShare=function(){var e=Object(w.a)(N.a.mark((function e(t){return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,D.a.put("/api/".concat(t,"/"),a.state.shareData,{headers:{Authorization:"Bearer ".concat(g.getToken())}});case 3:a.setState({shareUser:{email:""}}),l.notify.show(a.state.message,"success",3e3),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.log(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}(),a.toggleEdit=function(){a.setState({dateEdit:!1})},a.handleChangeEdit=function(e){var t=Object(O.a)({},a.state.editData,Object(y.a)({},e.target.name,e.target.value)),r=Object(O.a)({},a.state.errors,Object(y.a)({},e.target.name,""));a.setState({editData:t,errors:r})},a.editDates=Object(w.a)(N.a.mark((function e(){var t;return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=a.props.match.params.id,e.prev=1,e.next=4,D.a.put("/api/trips/".concat(t,"/"),a.state.editData,{headers:{Authorization:"Bearer ".concat(g.getToken())}});case 4:a.getData(),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(1),a.setState({errors:e.t0.response.data});case 10:case"end":return e.stop()}}),e,null,[[1,7]])}))),a}return Object(v.a)(t,e),Object(h.a)(t,[{key:"getData",value:function(){var e=Object(w.a)(N.a.mark((function e(){var t,a;return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.props.match.params.id,e.prev=1,e.next=4,D.a.get("/api/trips/".concat(t),{headers:{Authorization:"Bearer ".concat(g.getToken())}});case 4:a=e.sent,this.setState({trip:a.data,photos:a.data.photos,attractions:a.data.attractions,to_dos:a.data.to_dos,data:{open_trip:a.data.open_trip}}),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),console.log(e.t0);case 11:case"end":return e.stop()}}),e,this,[[1,8]])})));return function(){return e.apply(this,arguments)}}()},{key:"componentDidMount",value:function(){this.getData()}},{key:"formatDate",value:function(e){var t=e.getDate(),a=e.getMonth(),r=e.getFullYear();return t+" "+["January","February","March","April","May","June","July","August","September","October","November","December"][a]+" "+r}},{key:"render",value:function(){var e=this,t=this.state.trip,a=t.destination,r=t.start_date,s=t.end_date,c=this.state,o=c.photos,i=c.attractions,l=c.to_dos,u=c.dateEdit;return n.a.createElement("div",{className:"hero show-hero"},n.a.createElement("div",{className:"show-container"},n.a.createElement("div",{className:"button-wrapper"},n.a.createElement("form",{className:"share-form",onSubmit:this.shareTrip},n.a.createElement("input",{onChange:this.handleChangeShare,placeholder:"Enter email to share trip",name:"email",value:this.state.shareUser.email||""}),n.a.createElement("button",null)),this.state.data.open_trip?n.a.createElement("div",{className:"open-wrapper"},n.a.createElement("button",{onClick:this.toggleStatus,className:"button-close"},n.a.createElement("img",{src:"https://res.cloudinary.com/dqrkw1z1a/image/upload/v1583322182/ROAM/output-onlinepngtools_10_copy_qawmqh.png",alt:"open"}),n.a.createElement("p",null,"Public"))):n.a.createElement("div",{className:"open-wrapper"},n.a.createElement("button",{onClick:this.toggleStatus,className:"button-open"},n.a.createElement("img",{src:"https://res.cloudinary.com/dqrkw1z1a/image/upload/v1583322182/ROAM/output-onlinepngtools_10_qljuqe.png",alt:"open"}),n.a.createElement("p",null,"Private")))),n.a.createElement("div",{className:"title-wrapper"},n.a.createElement("h2",null,a)),u?n.a.createElement("div",{className:"show-edit-dates"},n.a.createElement("h3",null,this.formatDate(new Date(r))," - ",this.formatDate(new Date(s))),n.a.createElement("button",{className:"date-button",onClick:this.toggleEdit},"\u270e")):n.a.createElement("div",{className:"edit-date-container"},n.a.createElement("form",{onSubmit:this.editDates,className:"edit-dates"},n.a.createElement("div",{className:"field"},n.a.createElement("div",{className:"control"},n.a.createElement("input",{className:"input",onChange:this.handleChangeEdit,placeholder:"From",name:"start_date",type:"date"}))),n.a.createElement("div",{className:"field"},n.a.createElement("div",{className:"control"},n.a.createElement("input",{className:this.state.errors.message?"input is-danger":"input",onChange:this.handleChangeEdit,placeholder:"To",name:"end_date",type:"date"})),this.state.errors.message&&n.a.createElement("small",{className:"help is-danger"},this.state.errors.message)),n.a.createElement("button",{className:"button"},"Save changes"))),n.a.createElement("div",{className:"columns is-mobile is-multiline"},n.a.createElement("div",{className:"column is-one-half-desktop is-fullwidth-mobile"},n.a.createElement("div",{className:"show-photos"},o.map((function(t){return n.a.createElement("div",{className:"photo-wrapper",key:t.id},n.a.createElement("img",{className:"board-photo",src:t.image,alt:""}),n.a.createElement("button",{className:"photo-button",onClick:function(){return e.handleDeletePhoto(t)}},"\u2717"))})),n.a.createElement("form",{onSubmit:this.createPhoto},n.a.createElement("div",{className:"photo-wrapper"},n.a.createElement("div",{className:"image-container"},n.a.createElement(x,{handleChange:this.handlePhoto,fieldName:"image",displayImgUp:this.state.displayImgUp,preset:"j4ev6wv3",inputClassName:"profile-image"}))))),n.a.createElement("div",{className:"my-todos"},n.a.createElement("ul",null,n.a.createElement("p",{className:"todo-header"},"To do..."),l.map((function(t){return n.a.createElement("div",{className:"task-container",key:t.id},n.a.createElement("li",null,t.to_do),n.a.createElement("button",{className:"task-button",onClick:function(){return e.handleDeleteToDo(t)}},"\u2718"))}))),n.a.createElement("form",{className:"task-form",onSubmit:this.createToDo},n.a.createElement("input",{className:"input",onChange:this.handleToDo,placeholder:"New task",name:"to_do",value:this.state.to_do.to_do}),n.a.createElement("button",{className:"button"},"Add task")))),n.a.createElement("div",{className:"column is-one-half-desktop is-fullwidth-mobile"},n.a.createElement("div",{className:"show-links"},i.map((function(t){return n.a.createElement("div",{className:"link-wrapper",key:t.id},n.a.createElement(U.a,{className:"microlink",url:t.link}),n.a.createElement("button",{className:"photo-button",onClick:function(){return e.handleDeleteAttraction(t)}},"\u2718"))})),n.a.createElement("form",{className:"link-form",onSubmit:this.createAttraction},n.a.createElement("input",{className:"input",onChange:this.handleAttraction,placeholder:"Add your link here",name:"link",value:this.state.link.link}),n.a.createElement("button",{className:"button"},"\u2714\ufe0e"))),a&&n.a.createElement("div",{className:"extras"},n.a.createElement(B,{destination:a}),n.a.createElement(R,{destination:a}))))))}}]),t}(n.a.Component),P=function(e){function t(){var e,a;Object(m.a)(this,t);for(var r=arguments.length,n=new Array(r),s=0;s<r;s++)n[s]=arguments[s];return(a=Object(d.a)(this,(e=Object(f.a)(t)).call.apply(e,[this].concat(n)))).state={upcoming_trips:[],past_trips:[]},a.handleDelete=function(){var e=Object(w.a)(N.a.mark((function e(t){return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,D.a.delete("/api/trips/".concat(t.id),{headers:{Authorization:"Bearer ".concat(g.getToken())}});case 3:a.getData(),e.next=9;break;case 6:e.prev=6,e.t0=e.catch(0),console.log(e.t0);case 9:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(t){return e.apply(this,arguments)}}(),a}return Object(v.a)(t,e),Object(h.a)(t,[{key:"getData",value:function(){var e=Object(w.a)(N.a.mark((function e(){var t,a,r,n,s,c;return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=[],a=[],r=new Date,e.prev=3,e.next=6,D.a.get("/api/trips",{headers:{Authorization:"Bearer ".concat(g.getToken())}});case 6:n=e.sent,s=n.data.filter((function(e){return e.owner.id===g.getUser()})),c=n.data.filter((function(e){return e.attendees.filter((function(e){return e.id===g.getUser()})).length>0})),[].concat(Object(T.a)(s),Object(T.a)(c)).filter((function(e){new Date(e.end_date)<r?a.push(e):t.push(e)})),this.setState({upcoming_trips:t,past_trips:a}),e.next=17;break;case 14:e.prev=14,e.t0=e.catch(3),console.log(e.t0);case 17:case"end":return e.stop()}}),e,this,[[3,14]])})));return function(){return e.apply(this,arguments)}}()},{key:"componentDidMount",value:function(){this.getData()}},{key:"formatDate",value:function(e){var t=e.getDate(),a=e.getMonth(),r=e.getFullYear();return t+" "+["January","February","March","April","May","June","July","August","September","October","November","December"][a]+" "+r}},{key:"render",value:function(){var e=this,t=this.state,a=t.upcoming_trips,r=t.past_trips;return n.a.createElement("div",{className:"hero index-hero"},n.a.createElement("div",{className:"index-container"},n.a.createElement("div",{className:"add-button-container"},n.a.createElement(o.b,{to:"/trips/new"},n.a.createElement("button",{className:"add-button"}))),n.a.createElement("div",null,n.a.createElement("h2",{className:"trip-header"},"Upcoming Trips"),n.a.createElement("div",{className:"boxes"},a.map((function(t){return n.a.createElement("div",{className:"box",key:t.id},n.a.createElement(o.b,{to:"/mytrips/".concat(t.id)},n.a.createElement("div",{className:"media"},t.photos[0]?n.a.createElement("img",{src:t.photos[0].image,alt:""}):n.a.createElement("img",{src:"https://cdn4.iconfinder.com/data/icons/documents-letters-and-stationery/400/doc-14-512.png",alt:"placeholder"}),n.a.createElement("div",{className:"info"},n.a.createElement("h2",{className:"dest-header"},t.destination),n.a.createElement("h4",null,e.formatDate(new Date(t.start_date))," - ",e.formatDate(new Date(t.end_date)))))),n.a.createElement("button",{className:"delete-button button",onClick:function(){return e.handleDelete(t)}},"Delete trip"))})))),n.a.createElement("div",null,n.a.createElement("h2",{className:"trip-header"},"Past Trips"),n.a.createElement("div",{className:"boxes"},r.map((function(t){return n.a.createElement("div",{className:"box",key:t.id},n.a.createElement(o.b,{to:"/mytrips/".concat(t.id)},n.a.createElement("div",{className:"media"},t.photos[0]?n.a.createElement("img",{src:t.photos[0].image,alt:""}):n.a.createElement("img",{src:"https://cdn4.iconfinder.com/data/icons/documents-letters-and-stationery/400/doc-14-512.png",alt:"placeholder"}),n.a.createElement("div",{className:"info"},n.a.createElement("h2",{className:"dest-header"},t.destination),n.a.createElement("h4",null,e.formatDate(new Date(t.start_date))," - ",e.formatDate(new Date(t.end_date)))))),n.a.createElement("button",{className:"delete-button button",onClick:function(){return e.handleDelete(t)}},"Delete trip"))}))))))}}]),t}(n.a.Component),F=function(e){function t(){var e,a;Object(m.a)(this,t);for(var r=arguments.length,n=new Array(r),s=0;s<r;s++)n[s]=arguments[s];return(a=Object(d.a)(this,(e=Object(f.a)(t)).call.apply(e,[this].concat(n)))).state={data:{destination:"",start_date:"",end_date:""},errors:{}},a.handleChange=function(e){var t=Object(O.a)({},a.state.data,Object(y.a)({},e.target.name,e.target.value)),r=Object(O.a)({},a.state.errors,Object(y.a)({},e.target.name,""));a.setState({data:t,errors:r})},a.handleSubmit=function(){var e=Object(w.a)(N.a.mark((function e(t){var r;return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.prev=1,e.next=4,D.a.post("/api/trips/",a.state.data,{headers:{Authorization:"Bearer ".concat(g.getToken())}});case 4:r=e.sent,a.props.history.push("/mytrips/".concat(r.data.id)),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),a.setState({errors:e.t0.response.data});case 11:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(t){return e.apply(this,arguments)}}(),a}return Object(v.a)(t,e),Object(h.a)(t,[{key:"render",value:function(){return n.a.createElement("div",{className:"hero add-hero"},n.a.createElement("div",{className:"add-wrapper"},n.a.createElement("form",{onSubmit:this.handleSubmit},n.a.createElement("div",{className:"add-container"},n.a.createElement("h2",{className:"title"},"Create a Trip"),n.a.createElement("div",{className:"field-dest"},n.a.createElement("label",{className:"label"},"Destination"),n.a.createElement("div",{className:"control"},n.a.createElement("input",{className:"input",onChange:this.handleChange,placeholder:"Where are you going?",name:"destination"}))),n.a.createElement("div",{className:"field-date"},n.a.createElement("div",{className:"control"},n.a.createElement("label",{className:"label"},"From"),n.a.createElement("input",{className:"input",onChange:this.handleChange,name:"start_date",type:"date"})),n.a.createElement("div",{className:"control"},n.a.createElement("label",{className:"label"},"To"),n.a.createElement("input",{className:this.state.errors.message?"input is-danger":"input",onChange:this.handleChange,name:"end_date",type:"date"}))),this.state.errors.message&&n.a.createElement("small",{className:"help is-danger"},this.state.errors.message)),n.a.createElement("div",{className:"add-buttons"},n.a.createElement("button",{className:"button edit"},"Create")))))}}]),t}(n.a.Component),Y=function(e){function t(){var e,a;Object(m.a)(this,t);for(var r=arguments.length,n=new Array(r),s=0;s<r;s++)n[s]=arguments[s];return(a=Object(d.a)(this,(e=Object(f.a)(t)).call.apply(e,[this].concat(n)))).state={upcoming_trips:[],past_trips:[]},a}return Object(v.a)(t,e),Object(h.a)(t,[{key:"getData",value:function(){var e=Object(w.a)(N.a.mark((function e(){var t,a,r,n,s;return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=[],a=[],r=new Date,e.prev=3,e.next=6,D.a.get("/api/trips",{headers:{Authorization:"Bearer ".concat(g.getToken())}});case 6:n=e.sent,s=n.data.filter((function(e){if(e.open_trip&&e.owner.id!==g.getUser())return e})),s.filter((function(e){var t="";if(e.attendees.filter((function(e){e.id===g.getUser()&&(t="attending")})),"attending"!==t)return e})).filter((function(e){new Date(e.end_date)<r?a.push(e):t.push(e)})),this.setState({upcoming_trips:t,past_trips:a}),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(3),console.log(e.t0);case 16:case"end":return e.stop()}}),e,this,[[3,13]])})));return function(){return e.apply(this,arguments)}}()},{key:"componentDidMount",value:function(){this.getData()}},{key:"formatDate",value:function(e){var t=e.getDate(),a=e.getMonth(),r=e.getFullYear();return t+" "+["January","February","March","April","May","June","July","August","September","October","November","December"][a]+" "+r}},{key:"render",value:function(){var e=this,t=this.state,a=t.upcoming_trips,r=t.past_trips;return n.a.createElement("div",{className:"hero index-hero"},n.a.createElement("div",{className:"index-container"},n.a.createElement("div",null,n.a.createElement("h2",{className:"trip-header index-h1"},"Upcoming Trips"),n.a.createElement("div",{className:"boxes"},a.map((function(t){return n.a.createElement("div",{className:"box",key:t.id},n.a.createElement(o.b,{to:"/trips/".concat(t.id)},n.a.createElement("div",{className:"media"},t.photos[0]?n.a.createElement("img",{src:t.photos[0].image,alt:""}):n.a.createElement("img",{src:"https://cdn4.iconfinder.com/data/icons/documents-letters-and-stationery/400/doc-14-512.png",alt:"placeholder"}),n.a.createElement("div",{className:"info"},n.a.createElement("h2",{className:"dest-header"},t.destination),n.a.createElement("h4",null,e.formatDate(new Date(t.start_date))," - ",e.formatDate(new Date(t.end_date)))))))})))),n.a.createElement("div",null,n.a.createElement("h2",{className:"trip-header"},"Past Trips"),n.a.createElement("div",{className:"boxes"},r.map((function(t){return n.a.createElement("div",{className:"box",key:t.id},n.a.createElement(o.b,{to:"/trips/".concat(t.id)},n.a.createElement("div",{className:"media"},t.photos[0]?n.a.createElement("img",{src:t.photos[0].image,alt:""}):n.a.createElement("img",{src:"https://cdn4.iconfinder.com/data/icons/documents-letters-and-stationery/400/doc-14-512.png",alt:"placeholder"}),n.a.createElement("div",{className:"info"},n.a.createElement("h2",{className:"dest-header"},t.destination),n.a.createElement("h4",null,e.formatDate(new Date(t.start_date))," - ",e.formatDate(new Date(t.end_date)))))))}))))))}}]),t}(n.a.Component),L=function(e){function t(){var e,a;Object(m.a)(this,t);for(var r=arguments.length,n=new Array(r),s=0;s<r;s++)n[s]=arguments[s];return(a=Object(d.a)(this,(e=Object(f.a)(t)).call.apply(e,[this].concat(n)))).state={trip:{},photos:[],image:{image:""},displayImgUp:!1,attractions:[],link:{link:""},to_dos:[],to_do:{to_do:""},data:{open_trip:!1},errors:{},currentUser:{id:null,username:"",image:""},tripData:{trips:[]},requestData:{trip_requests:[]},offerData:{trip_offers:[]}},a.generateRequest=function(){var e=parseInt(a.props.match.params.id);a.setState({requestData:{trip_requests:[].concat(Object(T.a)(a.state.requestData.trip_requests),[e])}},(function(){a.sendRequest()}))},a.sendRequest=Object(w.a)(N.a.mark((function e(){var t;return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=g.getUser(),e.prev=1,e.next=4,D.a.put("/api/".concat(t,"/"),a.state.requestData,{headers:{Authorization:"Bearer ".concat(g.getToken())}});case 4:localStorage.setItem("requestee",t),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(1),a.setState({errors:e.t0.response.data});case 10:a.getOwnerOffers();case 11:case"end":return e.stop()}}),e,null,[[1,7]])}))),a.getOwnerOffers=Object(w.a)(N.a.mark((function e(){var t,r,n,s;return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=a.state.trip.owner.id,e.prev=1,e.next=4,D.a.get("/api/".concat(t),{headers:{Authorization:"Bearer ".concat(g.getToken())}});case 4:r=e.sent,n=r.data,s=n.trip_offers.map((function(e){return e.id})),a.setState({offerData:{trip_offers:Object(T.a)(s)}},(function(){a.generateOffer()})),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(1),console.log(e.t0);case 13:case"end":return e.stop()}}),e,null,[[1,10]])}))),a.generateOffer=function(){var e=parseInt(a.props.match.params.id);a.setState({offerData:{trip_offers:[].concat(Object(T.a)(a.state.offerData.trip_offers),[e])}},(function(){a.sendOffer()}))},a.sendOffer=Object(w.a)(N.a.mark((function e(){var t;return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=a.state.trip.owner.id,e.prev=1,e.next=4,D.a.put("/api/".concat(t,"/"),a.state.offerData,{headers:{Authorization:"Bearer ".concat(g.getToken())}});case 4:l.notify.show("Request sent!","success",3e3),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(1),a.setState({errors:e.t0.response.data});case 10:case"end":return e.stop()}}),e,null,[[1,7]])}))),a}return Object(v.a)(t,e),Object(h.a)(t,[{key:"getData",value:function(){var e=Object(w.a)(N.a.mark((function e(){var t,a;return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.props.match.params.id,e.prev=1,e.next=4,D.a.get("/api/trips/".concat(t),{headers:{Authorization:"Bearer ".concat(g.getToken())}});case 4:a=e.sent,this.setState({trip:a.data,photos:a.data.photos,attractions:a.data.attractions,to_dos:a.data.to_dos,data:{open_trip:a.data.open_trip}}),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),console.log(e.t0);case 11:case"end":return e.stop()}}),e,this,[[1,8]])})));return function(){return e.apply(this,arguments)}}()},{key:"componentDidMount",value:function(){this.getData(),this.getUserRequests()}},{key:"formatDate",value:function(e){var t=e.getDate(),a=e.getMonth(),r=e.getFullYear();return t+" "+["January","February","March","April","May","June","July","August","September","October","November","December"][a]+" "+r}},{key:"getUserRequests",value:function(){var e=Object(w.a)(N.a.mark((function e(){var t,a,r,n;return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=g.getUser(),e.prev=1,e.next=4,D.a.get("/api/".concat(t),{headers:{Authorization:"Bearer ".concat(g.getToken())}});case 4:a=e.sent,r=a.data,n=r.trip_requests.map((function(e){return e.id})),this.setState({requestData:{trip_requests:Object(T.a)(n)}}),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(1),console.log(e.t0);case 13:case"end":return e.stop()}}),e,this,[[1,10]])})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this.state.trip,t=e.destination,a=e.start_date,r=e.end_date,s=this.state,c=s.photos,o=s.attractions,i=s.to_dos;return n.a.createElement("div",{className:"hero show-hero"},n.a.createElement("div",{className:"show-container"},n.a.createElement("div",{className:"button-wrapper"},n.a.createElement("button",{onClick:this.generateRequest,className:"button-join"})),n.a.createElement("div",{className:"title-wrapper"},n.a.createElement("h2",null,t)),n.a.createElement("h3",null,this.formatDate(new Date(a))," - ",this.formatDate(new Date(r))),n.a.createElement("div",{className:"columns is-mobile is-multiline"},n.a.createElement("div",{className:"column is-one-half-desktop is-fullwidth-mobile"},n.a.createElement("div",{className:"show-photos"},c.map((function(e){return n.a.createElement("img",{className:"closed-board-photo",src:e.image,key:e.id,alt:""})}))),n.a.createElement("div",{className:"todos"},n.a.createElement("ul",null,n.a.createElement("p",{className:"todo-header"},"To do..."),i.map((function(e){return n.a.createElement("li",{key:e.id},e.to_do)}))))),n.a.createElement("div",{className:"column is-one-half-desktop is-fullwidth-mobile"},n.a.createElement("div",{className:"show-links-open"},o.map((function(e){return n.a.createElement(U.a,{url:e.link,key:e.id})}))),t&&n.a.createElement("div",{className:"extras"},n.a.createElement(B,{destination:t}),n.a.createElement(R,{destination:t}))))))}}]),t}(n.a.Component);var W=function(){return n.a.createElement(o.a,null,n.a.createElement(n.a.Fragment,null,n.a.createElement(E,null),n.a.createElement(u.a,null),n.a.createElement(i.c,null,n.a.createElement(i.a,{exact:!0,path:"/",component:p}),n.a.createElement(i.a,{path:"/register",component:_}),n.a.createElement(i.a,{path:"/login",component:S}),n.a.createElement(i.a,{path:"/profile/edit",component:C}),n.a.createElement(i.a,{path:"/profile",component:A}),n.a.createElement(i.a,{path:"/notifications",component:z}),n.a.createElement(i.a,{path:"/trips/new",component:F}),n.a.createElement(i.a,{path:"/trips/:id",component:L}),n.a.createElement(i.a,{path:"/trips",component:Y}),n.a.createElement(i.a,{path:"/mytrips/:id",component:J}),n.a.createElement(i.a,{path:"/mytrips",component:P}))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(n.a.createElement(W,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},70:function(e,t,a){e.exports=a(129)},75:function(e,t,a){}},[[70,1,2]]]);
//# sourceMappingURL=main.8d3ce90a.chunk.js.map